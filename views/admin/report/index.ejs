<!-- html starting tage and sidebar main content div -->
<%- include('../partials/sidebar') %>

  <!-- Topbar -->
  <%- include('../partials/topbar') %>

 <!-- Success and Failure Messages -->
 <%- include('../../alerts') %>
 
    <!-- Content -->
    <main class="main p-2">
      <div class="d-flex justify-content-between p-3 m-2">
        <h5 class="page-title">Reports</h5>
      </div>

      <div class="table-responsive">
      <table class="table table-hover caption-top border ">
        <caption>List of Reports</caption>
        <thead>
          <tr>
            <th scope="col">No</th>
            <th scope="col">Name</th>
            <th scope="col">Username</th>
            <th scope="col">Date</th>
            <th scope="col">Department</th>
            <th scope="col">Shift</th>
            <th scope="col">Check In</th>
            <th scope="col">Notes</th>
            <th scope="col">Check Out</th>
          </tr>
        </thead>
        <tbody>
          <% if(attendance && attendance.length> 0) {%>
            <% attendance.forEach((att, index )=> { %>
              <tr>
                <th scope="row">
                  <%= index + 1 %>
                </th>
                <td>
                  <%= att.employeeId.firstName %>
                    <%= att.employeeId.lastName %>
                </td>
                <td>
                  <%= att.employeeId.username %>
                </td>
                <td><%= att.date.toLocaleDateString() %>
                </td>
                <td>
                  <%= att.employeeId.department.departmentName %>
                </td>
                <td>
                  <%= att.employeeId.shift.startTime %>
                  - <%= att.employeeId.shift.endTime %>
                </td>
                <td>
                  <%= att.checkIn ? att.checkIn.toLocaleTimeString() : 'N/A' %>
                </td>
                <td>
                  <%= att.message %>
                </td>
                <td>
                  <%= att.checkOut ? att.checkOut.toLocaleTimeString() : 'N/A' %>
                </td>
              </tr>
              <% } )%>
                <% }else{ %>
                  <tr>
                    <td colspan="8" class="text-center">No Reports found.</td>
                  </tr>
                  <% } %>

        </tbody>
      </table>
      </div>
 

    </main>

    <!-- Footer -->
    <%- include('../partials/footer') %>