<!-- html starting tage and sidebar main content div -->
<%- include('../partials/sidebar') %>

  <!-- Topbar -->
  <%- include('../partials/topbar') %>
<!--  -->
  
    <!-- Content -->
    <main class="main p-3">
      <div class="d-flex justify-content-between p-2 m-2 flex-wrap gap-2">
        <h5 class="page-title">Edit Employee</h5 >
        <a class="btn btn-primary text-center rounded-pill" href="/admin/employees" role="button"><i class="fa-solid fa-arrow-left"></i> Back</a>
      </div>

      <!-- Edit Form -->
      <div class="row">
        <div class="col-lg-8 offset-lg-2">
          <form  action="/admin/Employees/edit/<%= employee._id %>" method="post">
            <div class="row mb-3">

              <!-- First Name -->
              <div class="col-sm-6 mb-3">
                <label for="firstName" class="form-label">First Name</label>
                <input type="text" class="form-control" id="firstName" value="<%= employee.firstName %>" name="firstName">
              </div>

              <!-- Last Name -->
              <div class="col-sm-6 mb-3">
                <label for="lastName" class="form-label">Last Name</label>
                <input type="text" class="form-control" id="lastName" value="<%= employee.lastName %>" name="lastName">
              </div>
               <!-- username -->
              <div class="col-sm-6 mb-3">
                <label for="username" class="form-label">Username</label>
                <input type="text" class="form-control" id="username" value="<%= employee.username %>" name="username">
              </div>
              
              <!-- email -->
              <div class="col-sm-6 mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" id="email" value="<%= employee.email %>" name="email">
              </div>
         
              <!-- password -->
              <div class="col-sm-6 mb-3">
                <label for="password" class="form-label">Password</label>
                <input type="password" class="form-control" id="password" value="<%= employee.password %>" name="password">
              </div>

              <!-- joining date -->
              <div class="col-sm-6 mb-3">
                <label for="joiningDate" class="form-label">Joining Date</label>
                <input type="text" class="form-control" id="joiningDate" value="<%= employee.joiningDate %>" name="joiningDate" data-datepicker="true" placeholder="YYYY-MM-DD" autocomplete="off">
            </div>
       
            <!-- shift -->
              <div class="col-sm-6 mb-3">
                <label for="shift" class="form-label">Shift</label>
                <select name="shift" class="form-select" id="shift">
                  <% if (shift && shift.length > 0) { %>
                  <option value="" disabled >Select a shift</option>
                      <!-- render all shifts -->
                    <% shift.forEach((s) => { %>
                      <option value="<%= s._id %>" <%= employee.shift && employee.shift._id.toString() === s._id.toString() ? 'selected' : '' %> >
                        <%= s.startTime %> - <%= s.endTime %>
                      </option>
                    <% }); %>
                    <% } else {%>
                      <option value="" disabled>No shifts available</option>
                      <% } %>
                  </select>
              </div>

              <!-- date of birth -->
              <div class="col-sm-6 mb-3">
                <label for="dateOfBirth">Date of Birth</label>
                <input type="text" class="form-control" id="dateOfBirth" value="<%= employee.dob %>" name="dob" data-datepicker="true" placeholder="YYYY-MM-DD" autocomplete="off">
              </div>
         
              <!-- phone  -->
              <div class="col-sm-6 mb-3">
                <label for="phone" class="form-label">Phone</label>
                <input type="text" class="form-control" id="phone" value="<%= employee.phone %>" name="phone">
              </div>

              <!-- gender -->
              <div class="col-sm-6 mb-3 radio">
                <label class="gen-label">Gender</label>
                <div>
                    <label class="me-2"><input type="radio" name="gender" value="male" <%= employee.gender === 'male' ? 'checked' : '' %>> Male</label>
  
                    <label><input type="radio" name="gender" value="female" <%= employee.gender === 'female' ? 'checked' : '' %>> Female</label>
                </div>
              </div>
  
              <!-- department -->
              <div class="col-sm-6 mb-3">
                <label for="department" class="form-label">Department</label>
                <select name="department" class="form-select" id="">
                  <% if (department && department.length > 0) { %>
                 <option value="" disabled>Select a Department</option>
  
                    <!-- it will render all the departments and select the existing one -->
                    <% department.forEach((d) => { %>
                      <option value="<%= d._id %>" <%= employee.department && employee.department._id.toString() === d._id.toString() ? 'selected' : '' %>>
                        <%= d.departmentName%> - <%= d.departmentId%>
                      </option>
                     
                    <% }); %>
                    <% } else {%>
                      <option value="" disabled>No departments available</option>
                      <% } %>
                     
                  </select>
              </div>

              <!-- status -->
              <div class="col-sm-6 mb-3">
                <label class="gen-label">Status</label>
                <div>
                <% if(employee.statusEmp === "active") { %>
                  <label class="me-2"><input type="radio" name="statusEmp" value="active" checked> Active</label>
                  <label><input type="radio" name="statusEmp" value="inactive"> Inactive</label>
                  <%} else {%>
                    <label class="me-2"><input type="radio" name="statusEmp" value="active"> Active</label>
  
                    <label><input type="radio" name="statusEmp" value="inactive" checked> Inactive</label>
                    <% } %>
                </div>
              </div>
            </div>
         
            <div class="d-flex justify-content-center">
  
              <button  type="submit" class="btn btn-primary ">SAVE CHANGES</button>
            </div>
  
          </form>
        </div>
      </div>


    </main>

    <!-- Footer -->
    <%- include('../partials/footer') %>